/*==============================================================================
 ___  _   _    _
/   || | | |  | |
\__  | | | |  | |  __
/    |/  |/_) |/  /  \_/\/
\___/|__/| \_/|__/\__/  /\_/
              |\
              |/
Focus v1.0
https://github.com/Elkfox/Focus
Copyright (c) 2017 Elkfox Co Pty Ltd
https://elkfox.com
Project lead: George Butter
MIT License
==============================================================================*/
var Focus=function(e,t){if(this.target=e,this.element=jQuery(e),this.config={visibleClass:"visible",innerSelector:".popup-inner"},t)for(var i in t)this.config[i]=t[i];this.visible=!1,this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.toggle=this.toggle.bind(this),Focus.elements[e]=this};Focus.elements={},Focus.getTarget=function(e,t){jQuery(e).is("a")&&t.preventDefault();const i=this.getSelectorFromElement(e);return i&&(target=i),target},Focus.getSelectorFromElement=function(e){var t=jQuery(e).data("target");return t&&"#"!==t||(t=jQuery(e).attr("href")||""),t},Focus.eventHandler=function(e,t){var i=Focus.elements[e];"hide"===t?i.hide():i.toggle()},Focus.prototype.show=function(){var e=this;return this.visible&&this.element.hasClass(this.config.visibleClass)?jQuery(document).trigger("concrete:popup:error",{error:"Popup already open"}):(this.element.addClass(this.config.visibleClass),this.visible=!0,this.element.one("click","[data-close]",function(t){t.preventDefault(),e.hide()}),this.element.one("click",this.config.innerSelector,function(t){(jQuery(t.target).is(e.config.innerSelector)||0===jQuery(t.target).parents(e.config.target).length)&&(e.hide(),jQuery(e.config.innerSelector).unbind("click"))}),this.element.on("keyup",function(t){t.preventDefault(),27===t.keyCode&&(this.element.off("keyup"),e.hide())}),jQuery(document).trigger("concrete:popup:open",[this.target]))},Focus.prototype.hide=function(){return this.visible||this.element.hasClass(this.config.visibleClass)?(this.element.removeClass(this.config.visibleClass),this.visible=!1,jQuery(document).trigger("focus:close",[this.target])):jQuery(document).trigger("focus:error",{error:"Focus element is already closed"})},Focus.prototype.toggle=function(){return this.visible?this.close():this.show()},jQuery(document).on("ready",function(){jQuery(document).on("click","[data-trigger]",function(e){var t=Focus.getTarget(jQuery(this),e);Focus.eventHandler(t,"toggle")}),jQuery(document).on("click","[data-close]",function(e){var t=Focus.getTarget(jQuery(this),e);Focus.eventHandler(t,"hide")})});
s
